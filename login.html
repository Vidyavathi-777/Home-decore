<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="user.css">
    <link rel="stylesheet" href="style.css">
    <link href="https://cdn.jsdelivr.net/npm/remixicon/fonts/remixicon.css" rel="stylesheet" />

  </head>
  <body>
    <header class="header-section">
      <div class="hamburger" id="hamburger">&#9776;</div>
      <nav class="navbar" id="navbar">
        <ul class="nav-list">
          <li><a href="index.html">HOME</a></li>
          <li><a href="#shop-by-category">CATEGORY</a></li>
          <li><a href="#discover-the-collection">COLLECTIONS</a></li>
          <li><a href="allProducts.html">SAMPLES</a></li>
        </ul>
      </nav>
      <h1><a href="index.html" class="logo">HOME DECOR</a></h1>
      <ul class="usermenu">
        <li onclick="window.location.href='cart.html'">
          <i class="fa-solid fa-cart-shopping"></i>
        </li>
        <li class="user-dropdown-wrapper">
          <i class="fa-solid fa-user" id="user-icon"></i>
          <div class="user-dropdown hidden" id="user-dropdown">
           
          </div>
        </li>
      </ul>
    </header>
    <section class="signup-section">
      <h2>HELLO AGAIN</h2>
      <p class="signin-prompt">
        Not an insider yet? <a href="/register.html">Sign up for an account </a>
      </p>

      <form class="signup-form" id="login-form">
        <label>
          Email Address
          <input type="email" name="email" required />
        </label>
        <label>
            Password
            <input type="password" name="password" required />
          </label>
        <button type="submit">Login Now</button>
      </form>
    </section>
    <footer id="footer">
        <section class="details">
          <div class="company">
            <ul>
              <li>ABout Audo Copenhagen</li>
              <li>Carerer</li>
              <li>Contact</li>
              <li>Cookie Policy</li>
              <li>Food Adminstration Report</li>
              <li>Declaration</li>
              <li>Our Responsibility</li>
              <li>Whistleblower Platform</li>
            </ul>
          </div>
          <div class="customer-service">
            <ul>
              <li>Store Locator</li>
              <li>Visit us</li>
              <li>Shipping Policy</li>
              <li>Return Policy</li>
              <li>Terms and Conditions</li>
              <li>Privacy Policy</li>
            </ul>
          </div>
          <div class="professionals">
            <ul>
              <li>B2B Online POrtal</li>
              <li>Image Bank</li>
              <li>Upholstrly Program</li>
              <li>Press Kit</li>
              <li>Revit & pCon Planner</li>
              <li>2D,3D & Revilt Files</li>
            </ul>
          </div>
          <div class="newsleter">
            <p>
              Stay connected to receive updates,learn about special events & new
              product launches fro Audo Copenhagen
            </p>
            <button>SUbscribe</button>
            
              <ul>
                <li><i class="fab fa-facebook-f"></i></li>
                <li><i class="fab fa-instagram"></i></li>
                <li><i class="fab fa-pinterest-p"></i></li>
              </ul>
              
            
          </div>
        </section>
        <section class="copyrights">
          <h1>Ivory Nest</h1>
          <p>Ivory A/s,Aarhusgade,Flor-2,Denmark</p>
          <p>CVR:12236483479,info@ivory</p>
        </section>
      </footer>
      <script src="script.js"></script>
      <script>
        document.getElementById("login-form").addEventListener("submit", async (e) => {
          e.preventDefault();
    
          const form = e.target;
          const data = {
            email: form.email.value,
            password: form.password.value,
          };
    
          try {
            const res = await fetch("https://home-decor-tqze.onrender.com/auth/login", {
              method: "POST",
              headers: {
                "Content-Type": "application/json",
              },
              body: JSON.stringify(data),
            });
    
            const result = await res.json();
            console.log(result);
    
            if (res.ok) {
              alert("Login Successful");
              
              localStorage.setItem("token", result.access_token);
              localStorage.setItem("username",result.user_id || "User")
              localStorage.setItem("name",result.user_name)
              window.location.href = "/"; 
            } else {
              alert(result.message || "Login failed");
            }
          } catch (error) {
            console.error(error);
            alert("Something went wrong.");
          }
        });
      </script>
  </body>
</html>

</body>
</html>